<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Packing Database - V√¥ T√≠ch 2026</title>
    <style>
        :root { --primary: #059669; --bg: #f0fdf4; --card: #ffffff; --text: #1f2937; }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); max-width: 1000px; margin: 0 auto; padding: 20px; }
        h1 { text-align: center; color: var(--primary); font-size: 1.8rem; margin-bottom: 5px; }
        p.subtitle { text-align: center; color: #4b5563; margin-top: 0; margin-bottom: 25px; }
        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .card h3 { margin-top: 0; color: #374151; font-size: 1.1rem; }
        input[type="text"], select, button { padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 15px; outline: none; }
        button { background: var(--primary); color: white; border: none; cursor: pointer; font-weight: bold; transition: 0.2s; }
        button:hover { background: #047857; }
        .add-form { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px; }
        .add-form input { flex: 2; min-width: 200px; }
        .add-form select { flex: 1; min-width: 130px; }
        
        .category { background: var(--card); border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); overflow: hidden; }
        .category-header { background: #d1fae5; padding: 12px 20px; font-weight: bold; font-size: 1.1rem; color: #065f46; display: flex; justify-content: space-between; cursor: pointer; }
        .item-list { padding: 10px 20px; }
        .item { display: flex; align-items: flex-start; justify-content: space-between; padding: 12px 0; border-bottom: 1px dashed #e5e7eb; }
        .item:last-child { border-bottom: none; }
        .item-left { display: flex; gap: 15px; flex: 1; }
        .item input[type="checkbox"] { width: 22px; height: 22px; cursor: pointer; margin-top: 2px; accent-color: var(--primary); }
        .item-info { flex: 1; }
        .item-name { font-weight: 500; font-size: 1.05rem; display: block; margin-bottom: 4px; }
        .item-desc { font-size: 0.85rem; color: #6b7280; margin-bottom: 6px; display: block; }
        .checked .item-name, .checked .item-desc { text-decoration: line-through; color: #9ca3af; }
        
        .badge { font-size: 0.75rem; padding: 4px 10px; border-radius: 20px; font-weight: 600; display: inline-block; }
        .badge.balo { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
        .badge.v24 { background: #ffedd5; color: #c2410c; border: 1px solid #fdba74; }
        .badge.v28 { background: #e0e7ff; color: #3730a3; border: 1px solid #a5b4fc; }
        .badge.phone { background: #f3e8ff; color: #6b21a8; border: 1px solid #d8b4fe; }
        
        .delete-btn { background: #ef4444; color: white; padding: 6px 10px; font-size: 12px; border-radius: 6px; cursor: pointer; border: none; }
        
        #progressBarContainer { width: 100%; background: #e5e7eb; height: 12px; border-radius: 10px; overflow: hidden; margin-top: 15px; }
        #progressBar { height: 100%; background: var(--primary); width: 0%; transition: 0.3s; }
    </style>
</head>
<body>

    <h1>üß≥ Universal Packing Database v3.0</h1>
    <p class="subtitle">Bao g·ªìm Checklist ƒê·ªì d√πng & H√†nh trang K·ªπ thu·∫≠t s·ªë</p>

    <div class="dashboard">
        <div class="card">
            <h3>Ti·∫øn ƒë·ªô ƒë√≥ng g√≥i</h3>
            <div style="font-size: 2rem; font-weight: bold; color: var(--primary);" id="progressText">0 / 0</div>
            <div id="progressBarContainer"><div id="progressBar"></div></div>
        </div>
        <div class="card">
            <h3>L·ªçc theo v·ªã tr√≠ / Ki·ªán h√†ng</h3>
            <select id="filterLocation" style="width: 100%; margin-top: 10px;" onchange="render()">
                <option value="all">üåç Hi·ªÉn th·ªã t·∫•t c·∫£ m·ªçi th·ª©</option>
                <option value="ƒêi·ªán tho·∫°i/Digital">üì± ƒêi·ªán tho·∫°i / Digital (C√†i ƒë·∫∑t tr∆∞·ªõc)</option>
                <option value="Balo">üéí Balo x√°ch tay (Gi·∫•y t·ªù, ƒê·ªì qu√Ω)</option>
                <option value="Vali 24">üß≥ Vali 24 inch (ƒê·ªì n·∫∑ng, ƒê·ªì ƒÉn, Ch·∫•t l·ªèng)</option>
                <option value="Vali 28">üì¶ Vali 28 inch (Qu·∫ßn √°o, ƒê·ªì c·ªìng k·ªÅnh, Nh·∫π)</option>
            </select>
        </div>
    </div>

    <div class="card" style="margin-bottom: 20px;">
        <h3>‚ûï Th√™m item vƒ© m√¥ c·ªßa ri√™ng b·∫°n</h3>
        <div class="add-form">
            <input type="text" id="newItemName" placeholder="T√™n ƒë·ªì v·∫≠t / Vi·ªác c·∫ßn l√†m...">
            <input type="text" id="newItemDesc" placeholder="Ghi ch√∫ (Kh√¥ng b·∫Øt bu·ªôc)...">
            <select id="newItemCat">
                <option value="H√†nh trang Digital & M·∫°ng">Digital & M·∫°ng</option>
                <option value="ƒê·ªì ƒÉn & Th·ª©c u·ªëng">ƒê·ªì ƒÉn & Th·ª©c u·ªëng</option>
                <option value="Gi·∫•y t·ªù & T√†i ch√≠nh">Gi·∫•y t·ªù & T√†i ch√≠nh</option>
                <option value="Sinh ho·∫°t & C√° nh√¢n">Sinh ho·∫°t & C√° nh√¢n</option>
                <option value="Qu·∫ßn √°o & Ph·ª• ki·ªán">Qu·∫ßn √°o & Ph·ª• ki·ªán</option>
                <option value="ƒêi·ªán t·ª≠ & S·ªü th√≠ch">ƒêi·ªán t·ª≠ & C√¥ng ngh·ªá</option>
                <option value="Y t·∫ø & Thu·ªëc">Y t·∫ø & Thu·ªëc</option>
            </select>
            <select id="newItemLoc">
                <option value="Vali 28">Vali 28 (Nh·∫π/To)</option>
                <option value="Vali 24">Vali 24 (N·∫∑ng/Nh·ªè)</option>
                <option value="Balo">Balo (X√°ch tay)</option>
                <option value="ƒêi·ªán tho·∫°i/Digital">ƒêi·ªán tho·∫°i/C√†i ƒë·∫∑t</option>
            </select>
            <button onclick="addItem()">L∆∞u Database</button>
        </div>
    </div>

    <div id="databaseContainer"></div>

    <script>
        const defaultDatabase = [
            // H√ÄNH TRANG DIGITAL & M·∫†NG (X·ª≠ l√Ω tr∆∞·ªõc khi bay)
            { id: 'dig1', name: 'Mua Sim 4G Trung Qu·ªëc / eSIM', desc: 'Mua ·ªü VN, lo·∫°i c√≥ s·∫µn VPN v∆∞·ª£t t∆∞·ªùng l·ª≠a d√πng cho 10 ng√†y ƒë·∫ßu.', category: 'H√†nh trang Digital & M·∫°ng', location: 'ƒêi·ªán tho·∫°i/Digital' },
            { id: 'dig2', name: 'C√†i ƒë·∫∑t VPN (Clash / V2ray / Shadowrocket)', desc: 'B·∫Øt bu·ªôc c√†i tr√™n ƒëi·ªán tho·∫°i Vivo v√† Laptop tr∆∞·ªõc khi bay. Mua s·∫µn g√≥i m·∫°ng.', category: 'H√†nh trang Digital & M·∫°ng', location: 'ƒêi·ªán tho·∫°i/Digital' },
            { id: 'dig3', name: 'C√†i App Thanh to√°n: Alipay, WeChat', desc: 'X√°c th·ª±c h·ªô chi·∫øu s·∫µn, li√™n k·∫øt th·∫ª Visa/Mastercard (n·∫øu c√≥).', category: 'H√†nh trang Digital & M·∫°ng', location: 'ƒêi·ªán tho·∫°i/Digital' },
            { id: 'dig4', name: 'C√†i App B·∫£n ƒë·ªì: Gaode Ditu / Baidu Maps', desc: 'Google Maps b√™n ƒë√≥ sai s·ªë r·∫•t nhi·ªÅu, b·∫Øt bu·ªôc d√πng app n·ªôi ƒë·ªãa.', category: 'H√†nh trang Digital & M·∫°ng', location: 'ƒêi·ªán tho·∫°i/Digital' },
            { id: 'dig5', name: 'C·∫≠p nh·∫≠t Game (Genshin Impact, v.v.)', desc: 'T·∫£i tr∆∞·ªõc data update qua Wifi ·ªü VN, sang ƒë√≥ t·∫£i b·∫±ng 4G r·∫•t x√≥t ti·ªÅn.', category: 'H√†nh trang Digital & M·∫°ng', location: 'ƒêi·ªán tho·∫°i/Digital' },
            { id: 'dig6', name: 'T·∫£i s·∫µn phim / Ti·ªÉu thuy·∫øt / Truy·ªán', desc: 'T·∫£i c√°c b·ªô truy·ªán ABO, B√°ch h·ª£p ∆∞a th√≠ch v·ªÅ m√°y ƒë·ªçc offline l√∫c c√°ch ly/ch·ªù t√†u xe.', category: 'H√†nh trang Digital & M·∫°ng', location: 'ƒêi·ªán tho·∫°i/Digital' },
            { id: 'dig7', name: 'Backup Scripts Tampermonkey', desc: 'Xu·∫•t file c√°c script ƒëang d√πng tr√™n web ƒë·ªÉ sang ƒë√≥ add l·∫°i v√†o tr√¨nh duy·ªát m·ªõi n·∫øu c·∫ßn.', category: 'H√†nh trang Digital & M·∫°ng', location: 'ƒêi·ªán tho·∫°i/Digital' },

            // ƒê·ªí ƒÇN & TH·ª®C U·ªêNG
            { id: 'f1', name: 'M√¨ g√≥i / Ph·ªü / Mi·∫øn ƒÉn li·ªÅn (10 g√≥i)', desc: 'C·ª©u ƒë√≥i l√∫c n·ª≠a ƒë√™m ho·∫∑c khi ƒë·ªì ƒÉn ·ªü canteen qu√° d·∫ßu m·ª°/cay.', category: 'ƒê·ªì ƒÉn & Th·ª©c u·ªëng', location: 'Vali 24' },
            { id: 'f2', name: 'Ru·ªëc heo / B√≤ kh√¥ (H√∫t ch√¢n kh√¥ng K·ª∏)', desc: 'H·∫£i quan ƒë√¥i khi l√†m kh√≥ ƒë·ªì th·ªãt, nh·ªõ h√∫t ch√¢n kh√¥ng kh√¥ng nh√£n m√°c k·ªπ.', category: 'ƒê·ªì ƒÉn & Th·ª©c u·ªëng', location: 'Vali 24' },
            { id: 'f3', name: 'C√† ph√™ g√≥i (G7, Trung Nguy√™n)', desc: 'B√™n Trung chu·ªông tr√†, cafe kh√° nh·∫°t v√† ƒë·∫Øt. Mang theo n·∫øu hay bu·ªìn ng·ªß.', category: 'ƒê·ªì ƒÉn & Th·ª©c u·ªëng', location: 'Vali 24' },
            { id: 'f4', name: 'Gia v·ªã Vi·ªát: B·ªôt canh / Mu·ªëi H·∫£o H·∫£o', desc: 'Ch·∫•m hoa qu·∫£, n√™m n·∫øm ƒë·ªì ƒÉn nh·ªØng ng√†y nh·ªõ v·ªã Vi·ªát Nam.', category: 'ƒê·ªì ƒÉn & Th·ª©c u·ªëng', location: 'Vali 24' },
            { id: 'f5', name: 'T∆∞∆°ng ·ªõt Chinsu / Nam Ng∆∞ mini', desc: 'T√πy kh·∫©u v·ªã, n·∫øu kh√¥ng quen v·ªã x√¨ d·∫ßu/h·∫Øc x√¨ d·∫ßu Trung.', category: 'ƒê·ªì ƒÉn & Th·ª©c u·ªëng', location: 'Vali 24' },
            { id: 'f6', name: 'K·∫πo ng·∫≠m ho / K·∫πo cao su', desc: 'D√πng l√∫c ƒëi m√°y bay ch·ªëng √π tai ho·∫∑c th·ªùi ti·∫øt kh√¥ l·∫°nh.', category: 'ƒê·ªì ƒÉn & Th·ª©c u·ªëng', location: 'Balo' },
            { id: 'f7', name: 'Chai n∆∞·ªõc l·ªçc nh·ªè (Mua ·ªü s·∫£nh ch·ªù)', desc: 'U·ªëng tr√™n m√°y bay v√† l√∫c v·ª´a h·∫° c√°nh l·ªânh k·ªânh ƒë·ªì ƒë·∫°c ch∆∞a k·ªãp mua n∆∞·ªõc.', category: 'ƒê·ªì ƒÉn & Th·ª©c u·ªëng', location: 'Balo' },

            // GI·∫§Y T·ªú
            { id: 'g1', name: 'H·ªô chi·∫øu (c√≤n h·∫°n d√†i) + Visa X2', desc: 'Ch·ª•p l·∫°i ·∫£nh l∆∞u tr√™n ƒëi·ªán tho·∫°i/Google Drive d·ª± ph√≤ng.', category: 'Gi·∫•y t·ªù & T√†i ch√≠nh', location: 'Balo' },
            { id: 'g2', name: 'Th∆∞ b√°o tr√∫ng tuy·ªÉn Giang Nam (G·ªëc + Photo)', desc: 'D√πng ƒë·ªÉ nh·∫≠p h·ªçc v√† tr√¨nh h·∫£i quan.', category: 'Gi·∫•y t·ªù & T√†i ch√≠nh', location: 'Balo' },
            { id: 'g3', name: 'Form JW202/DQ (G·ªëc + Photo)', desc: 'Gi·∫•y t·ªù b·∫Øt bu·ªôc v·ªõi du h·ªçc sinh.', category: 'Gi·∫•y t·ªù & T√†i ch√≠nh', location: 'Balo' },
            { id: 'g4', name: '·∫¢nh th·∫ª (Ph√¥ng tr·∫Øng + Xanh)', desc: 'Chu·∫©n b·ªã 10 t·∫•m 3x4, 10 t·∫•m 4x6.', category: 'Gi·∫•y t·ªù & T√†i ch√≠nh', location: 'Balo' },
            { id: 'g5', name: 'Ti·ªÅn m·∫∑t NDT (C√≥ ƒë·ªïi ti·ªÅn l·∫ª)', desc: 'ƒê·ªïi kho·∫£ng 2000-3000 t·ªá c·∫ßm tay, nh·ªõ c√≥ t·ªù 10, 20 t·ªá ƒë·ªÉ ƒëi taxi, n·∫°p th·∫ª.', category: 'Gi·∫•y t·ªù & T√†i ch√≠nh', location: 'Balo' },
            { id: 'g6', name: 'Th·∫ª Visa / Mastercard', desc: 'D·ª± ph√≤ng tr∆∞·ªùng h·ª£p Alipay ch∆∞a li√™n k·∫øt ƒë∆∞·ª£c.', category: 'Gi·∫•y t·ªù & T√†i ch√≠nh', location: 'Balo' },
            { id: 'g7', name: 'B√∫t bi ƒëen/xanh', desc: 'R·∫•t hay c·∫ßn ƒë·ªÉ ƒëi·ªÅn t·ªù khai nh·∫≠p c·∫£nh tr√™n m√°y bay.', category: 'Gi·∫•y t·ªù & T√†i ch√≠nh', location: 'Balo' },

            // ƒêI·ªÜN T·ª¨
            { id: 'e1', name: 'Laptop + C·ª•c s·∫°c', desc: 'B·∫£o qu·∫£n c·∫©n th·∫≠n trong balo ch·ªëng s·ªëc.', category: 'ƒêi·ªán t·ª≠ & S·ªü th√≠ch', location: 'Balo' },
            { id: 'e2', name: 'S·∫°c d·ª± ph√≤ng (D∆∞·ªõi 20000mAh)', desc: 'B·∫ÆT BU·ªòC ƒë·ªÉ trong Balo x√°ch tay, kh√¥ng ƒë∆∞·ª£c k√Ω g·ª≠i.', category: 'ƒêi·ªán t·ª≠ & S·ªü th√≠ch', location: 'Balo' },
            { id: 'e3', name: 'ƒêi·ªán tho·∫°i ph·ª• (n·∫øu c√≥)', desc: 'D√πng ƒë·ªÉ l·∫Øp sim VN nh·∫≠n OTP ng√¢n h√†ng.', category: 'ƒêi·ªán t·ª≠ & S·ªü th√≠ch', location: 'Balo' },
            { id: 'e4', name: 'Ph√≠ch c·∫Øm chuy·ªÉn ƒë·ªïi 3 ch·∫•u ch√©o', desc: 'Mang 1-2 c·ª•c, ·ªï c·∫Øm t∆∞·ªùng TQ to√†n lo·∫°i n√†y.', category: 'ƒêi·ªán t·ª≠ & S·ªü th√≠ch', location: 'Vali 24' },
            { id: 'e5', name: '·ªî ƒëi·ªán k√©o d√†i (Lioa/ƒêi·ªán Quang)', desc: 'ƒê·ª° ph·∫£i l√∫i h√∫i c·∫Øm s·∫°c g√≥c t∆∞·ªùng.', category: 'ƒêi·ªán t·ª≠ & S·ªü th√≠ch', location: 'Vali 24' },
            { id: 'e6', name: 'Tai nghe + C√°p s·∫°c d·ª± ph√≤ng', desc: 'C√°p type-C mang d∆∞ ra 1 s·ª£i l·ª° ƒë·ª©t.', category: 'ƒêi·ªán t·ª≠ & S·ªü th√≠ch', location: 'Balo' },

            // SINH HO·∫†T C√Å NH√ÇN
            { id: 's1', name: 'BƒÉng v·ªá sinh (ƒê·ªß d√πng 3 th√°ng)', desc: 'Cho v√†o vali 28 inch v√¨ to, nh·∫π, ch·ªëng s·ªëc t·ªët cho ƒë·ªì kh√°c.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 28' },
            { id: 's2', name: 'Skincare (T·∫©y trang, SRM, Toner, Kem ch·ªëng n·∫Øng)', desc: 'Mang full-size ƒëang d√πng, ch√®n k·ªπ ch·ªëng v·ª° b·ªçc trong nilon zip.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 24' },
            { id: 's3', name: 'B·ªô chi·∫øt S·ªØa t·∫Øm, D·∫ßu g·ªôi (100ml)', desc: 'Mang ƒë·ªß d√πng 1 tu·∫ßn ƒë·∫ßu, ·ªïn ƒë·ªãnh r·ªìi mua chai l·ªõn ·ªü si√™u th·ªã n·ªôi ƒë·ªãa.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 24' },
            { id: 's4', name: 'B√†n ch·∫£i, Tu√Ωp kem ƒë√°nh rƒÉng nh·ªè', desc: 'ƒê·ªÉ trong t√∫i zip d·ªÖ l·∫•y.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 24' },
            { id: 's5', name: 'ƒê·ªì c·∫Øt m√≥ng tay, Nh√≠p, Kim ch·ªâ', desc: 'Nh·ªØng th·ª© r·∫•t nh·ªè nh∆∞ng hay qu√™n v√† kh√≥ t√¨m mua ngay.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 24' },
            { id: 's6', name: 'KhƒÉn m·∫∑t, KhƒÉn t·∫Øm', desc: 'N√™n mang 2 khƒÉn m·∫∑t, 1 khƒÉn t·∫Øm.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 28' },
            { id: 's7', name: 'Cu·ªôn gi·∫•y v·ªá sinh + KhƒÉn ∆∞·ªõt', desc: 'C·ª±c k·ª≥ quan tr·ªçng l√∫c v·ª´a v√†o ph√≤ng tr·ªç/KTX tr·ªëng kh√¥ng.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 24' },
            { id: 's8', name: '√î/D√π che n·∫Øng m∆∞a, g·∫•p g·ªçn', desc: 'Th·ªùi ti·∫øt m√πa h√® V√¥ T√≠ch n·∫Øng g·∫Øt v√† hay m∆∞a.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Vali 28' },
            { id: 's9', name: 'B√¨nh gi·ªØ nhi·ªát nh·ªè', desc: 'B√™n TQ c√≥ vƒÉn h√≥a u·ªëng n∆∞·ªõc ·∫•m ·ªü m·ªçi n∆°i.', category: 'Sinh ho·∫°t & C√° nh√¢n', location: 'Balo' },

            // QU·∫¶N √ÅO (T·∫≠p trung m√πa xu√¢n - h√® V√¥ T√≠ch)
            { id: 'c1', name: '√Åo kho√°c gi√≥ / √Åo hoodie', desc: 'M·∫∑c ƒëi ƒë∆∞·ªùng v√† nh·ªØng ng√†y th√°ng 3 c√≤n se l·∫°nh.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },
            { id: 'c2', name: '√Åo thun / S∆° mi (7-10 c√°i)', desc: 'ƒê·ªì m·∫∑c ƒëi h·ªçc h√†ng ng√†y cho m√πa h√®.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },
            { id: 'c3', name: 'Qu·∫ßn d√†i (Jeans/Kaki/·ªêng r·ªông)', desc: 'Mang 3-4 c√°i.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },
            { id: 'c4', name: 'Qu·∫ßn short / V√°y / ƒê·ªì m·∫∑c nh√†', desc: 'M√πa h√® b√™n ƒë√≥ kh√° n√≥ng.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },
            { id: 'c5', name: 'ƒê·ªì l√≥t (10-15 b·ªô)', desc: 'Khuy√™n mang nhi·ªÅu ƒë·ªÉ kh√¥ng ph·∫£i gi·∫∑t li√™n t·ª•c nh·ªØng ng√†y ƒë·∫ßu b·∫≠n r·ªôn.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },
            { id: 'c6', name: 'T·∫•t/V·ªõ (7-10 ƒë√¥i)', desc: 'Cu·ªôn tr√≤n nh√©t v√†o trong l√≤ng gi√†y ƒë·ªÉ ti·∫øt ki·ªám di·ªán t√≠ch.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },
            { id: 'c7', name: 'Gi√†y Th·ªÉ thao / Sneaker', desc: 'Mang 1 ƒë√¥i ƒëi ·ªü VN, 1 ƒë√¥i ƒë·ªÉ trong vali.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },
            { id: 'c8', name: 'D√©p l√™ ƒëi trong nh√†', desc: 'Nh·ª±a d·∫ªo, ƒëi ƒë∆∞·ª£c v√†o nh√† t·∫Øm.', category: 'Qu·∫ßn √°o & Ph·ª• ki·ªán', location: 'Vali 28' },

            // Y T·∫æ
            { id: 'y1', name: 'Thu·ªëc H·∫° s·ªët / C·∫£m c√∫m (Panadol/Decolgen)', desc: 'C·ª±c k·ª≥ c·∫ßn thi·∫øt v√¨ m·ªõi sang d·ªÖ ·ªëm do thay ƒë·ªïi th·ªùi ti·∫øt.', category: 'Y t·∫ø & Thu·ªëc', location: 'Vali 24' },
            { id: 'y2', name: 'Men ti√™u h√≥a / Thu·ªëc ƒëau b·ª•ng (Berberin)', desc: 'ƒê·ªì ƒÉn b√™n ƒë√≥ nhi·ªÅu d·∫ßu m·ª°, d·ªÖ ƒëau b·ª•ng.', category: 'Y t·∫ø & Thu·ªëc', location: 'Vali 24' },
            { id: 'y3', name: 'Thu·ªëc d·ªã ·ª©ng (th·ªùi ti·∫øt / th·ª©c ƒÉn)', desc: 'R·∫•t c·∫ßn n·∫øu b·∫°n c√≥ c∆° ƒë·ªãa m·∫´n c·∫£m.', category: 'Y t·∫ø & Thu·ªëc', location: 'Vali 24' },
            { id: 'y4', name: 'BƒÉng c√° nh√¢n (Urgo), D·∫ßu gi√≥, Povidine', desc: 'X·ª≠ l√Ω x√¢y x√°t nh·∫π.', category: 'Y t·∫ø & Thu·ªëc', location: 'Vali 24' }
        ];

        let db = JSON.parse(localStorage.getItem('myLifeDbV3')) || defaultDatabase;
        let checkedState = JSON.parse(localStorage.getItem('myCheckedStateV3')) || {};

        function render() {
            const container = document.getElementById('databaseContainer');
            const filterLoc = document.getElementById('filterLocation').value;
            container.innerHTML = '';

            const categories = [...new Set(db.map(item => item.category))];
            let total = 0, checked = 0;

            categories.forEach(cat => {
                const itemsInCat = db.filter(item => item.category === cat && (filterLoc === 'all' || item.location === filterLoc));
                if (itemsInCat.length === 0) return;

                const catDiv = document.createElement('div');
                catDiv.className = 'category';
                
                // Toggle list visibility logic
                const headerId = 'header_' + cat.replace(/\s+/g, '');
                catDiv.innerHTML = `<div class="category-header" onclick="toggleCat('${headerId}')">${cat} <span>‚ñº</span></div>`;
                
                const listDiv = document.createElement('div');
                listDiv.className = 'item-list';
                listDiv.id = headerId;

                itemsInCat.forEach(item => {
                    total++;
                    const isChecked = checkedState[item.id] || false;
                    if (isChecked) checked++;

                    let badgeClass = '';
                    if(item.location === 'Balo') badgeClass = 'balo';
                    else if(item.location === 'Vali 24') badgeClass = 'v24';
                    else if(item.location === 'Vali 28') badgeClass = 'v28';
                    else badgeClass = 'phone';

                    listDiv.innerHTML += `
                        <div class="item ${isChecked ? 'checked' : ''}">
                            <div class="item-left">
                                <input type="checkbox" id="${item.id}" ${isChecked ? 'checked' : ''} onchange="toggle('${item.id}')">
                                <div class="item-info">
                                    <label for="${item.id}" class="item-name">${item.name}</label>
                                    ${item.desc ? `<span class="item-desc">${item.desc}</span>` : ''}
                                    <span class="badge ${badgeClass}">${item.location}</span>
                                </div>
                            </div>
                            ${!defaultDatabase.find(d => d.id === item.id) ? `<button class="delete-btn" onclick="deleteItem('${item.id}')">X√≥a</button>` : ''}
                        </div>
                    `;
                });
                catDiv.appendChild(listDiv);
                container.appendChild(catDiv);
            });

            document.getElementById('progressText').innerText = `${checked} / ${total}`;
            const percent = total === 0 ? 0 : Math.round((checked/total)*100);
            document.getElementById('progressBar').style.width = percent + '%';
        }

        function toggleCat(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'none' ? 'block' : 'none';
        }

        function toggle(id) {
            checkedState[id] = !checkedState[id];
            localStorage.setItem('myCheckedStateV3', JSON.stringify(checkedState));
            render();
        }

        function addItem() {
            const name = document.getElementById('newItemName').value.trim();
            const desc = document.getElementById('newItemDesc').value.trim();
            if (!name) return alert('B·∫°n ∆°i ch∆∞a nh·∫≠p t√™n ƒë·ªì v·∫≠t k√¨a!');
            
            const cat = document.getElementById('newItemCat').value;
            const loc = document.getElementById('newItemLoc').value;
            
            const newItem = { id: 'custom_' + Date.now(), name: name, desc: desc, category: cat, location: loc };
            db.push(newItem);
            localStorage.setItem('myLifeDbV3', JSON.stringify(db));
            
            document.getElementById('newItemName').value = '';
            document.getElementById('newItemDesc').value = '';
            render();
        }

        function deleteItem(id) {
            if(!confirm('X√≥a th·∫≠t kh√¥ng?')) return;
            db = db.filter(item => item.id !== id);
            delete checkedState[id];
            localStorage.setItem('myLifeDbV3', JSON.stringify(db));
            localStorage.setItem('myCheckedStateV3', JSON.stringify(checkedState));
            render();
        }

        render();
    </script>
</body>
</html>
